# Readme file for task 3

**Author: Yiqing Gu**

+ There are 7 functions in this file.
  - craft_task2_packets(address,time)
  - step1(packet)
  - step2()
  - generate_icmp_packet(add, number)
  - send_and_receive_packets(pack, status)
  - step3()
  - main()

### craft_task2_packets(address,time)

This function is for creating packets user needs.

The way of structuring packets is from scapy. Base structure: IP()/ICMP()/......

There are two parameters needed here:

**address:** The address user wants to be packed into packets.

**time:** The value of TTL. It is "Time To Live" of packets.

The function will return the packets it created.

### step1(packet)

This is a function for sending packets and receiving responses.

sr() in scapy is used here for sending packets.

The value of timeout is set to 10. A decent value.

After sending packets, python script will collect and analyze reports.

If responses got received, detailed information in responses will be printed.

If there are no responses, "Error! No response" will appear in terminal.

### step2()

This is a function follows requirements of task3 step2 in assignment.


It will call craft_task2_packets(address,time) and generate packets which has been created once in task2.

After generation, these packets will be sent according to IP address in packets by calling step1(packet).

No parameters are needed here.

### generate_icmp_packet(add, number)

This is a function for generating ICMP packets as required in task3 step3.

It will call craft_task2_packets(address,time) to generate packets.

The TTL value here is decreasing by 1 after a one-time generation, as required in task3 step3.

**numLoop** saves the value of TTL and how many loops left.

After generation, it will also call send_and_receive_packets(pack, status) to send packets and collect responses automatically.

There are two parameters needed here:

**add:** The address user wants to be packed into packets.

**number:** The value of TTL. It is "Time To Live" of packets.

### send_and_receive_packets(pack, status)

This is a function for sending packets and receiving responses.

sr() in scapy is used here for sending packets.

The value of timeout is set to 10. A decent value.

After sending packets, python script will collect and analyze reports.

If responses got received, current TTL and source IP in response will be printed.

Otherwise, error messages will apear in terminal. It contains current TTL.

There are two parameters needed here:

**pack:** The packet was generated by generate_icmp_packet(add, number). It will be sent by this function.

**status:** The value of current TTL. It is for confirming what current TTL is and printing error messages.

### step3()

This is a function follows requirements of task3 step3 in assignment.

The initial TTL is set to 10, as required in assignment.

The IP address is 8.8.8.8, as required in assignment.

It will call generate_icmp_packet(add, number) to create packets needed here.

generate_icmp_packet(add, number) will call send_and_receive_packets(pack, status) to follow requirements in assignment file.

No parameters are needed here.

### main()

This is the main function.

It will call functions which can get something printed as what assignment requires.

The sequence of calls follows the sequences of steps in assignment.

No parameters are needed here.

